#ifndef SNAKE_H
#define SNAKE_H

#include <vector>
#include <iostream> 
#include <utility> 
#include "enums.h"
#include "board.h"
#include "food.h"
#include "block.h"
#include <cmath>
#include <stdlib.h> 

#define SNAKE_SIZE 100
#define SNAKE_HEAD_INDEX 0

class Snake
{
private:
	float vertices[180] = {
	-0.5f, -0.5f, -0.5f,  0.0f, 0.0f,
	 0.5f, -0.5f, -0.5f,  1.0f, 0.0f,
	 0.5f,  0.5f, -0.5f,  1.0f, 1.0f,
	 0.5f,  0.5f, -0.5f,  1.0f, 1.0f,
	-0.5f,  0.5f, -0.5f,  0.0f, 1.0f,
	-0.5f, -0.5f, -0.5f,  0.0f, 0.0f,

	-0.5f, -0.5f,  0.5f,  0.0f, 0.0f,
	 0.5f, -0.5f,  0.5f,  1.0f, 0.0f,
	 0.5f,  0.5f,  0.5f,  1.0f, 1.0f,
	 0.5f,  0.5f,  0.5f,  1.0f, 1.0f,
	-0.5f,  0.5f,  0.5f,  0.0f, 1.0f,
	-0.5f, -0.5f,  0.5f,  0.0f, 0.0f,

	-0.5f,  0.5f,  0.5f,  1.0f, 0.0f,
	-0.5f,  0.5f, -0.5f,  1.0f, 1.0f,
	-0.5f, -0.5f, -0.5f,  0.0f, 1.0f,
	-0.5f, -0.5f, -0.5f,  0.0f, 1.0f,
	-0.5f, -0.5f,  0.5f,  0.0f, 0.0f,
	-0.5f,  0.5f,  0.5f,  1.0f, 0.0f,

	 0.5f,  0.5f,  0.5f,  1.0f, 0.0f,
	 0.5f,  0.5f, -0.5f,  1.0f, 1.0f,
	 0.5f, -0.5f, -0.5f,  0.0f, 1.0f,
	 0.5f, -0.5f, -0.5f,  0.0f, 1.0f,
	 0.5f, -0.5f,  0.5f,  0.0f, 0.0f,
	 0.5f,  0.5f,  0.5f,  1.0f, 0.0f,

	-0.5f, -0.5f, -0.5f,  0.0f, 1.0f,
	 0.5f, -0.5f, -0.5f,  1.0f, 1.0f,
	 0.5f, -0.5f,  0.5f,  1.0f, 0.0f,
	 0.5f, -0.5f,  0.5f,  1.0f, 0.0f,
	-0.5f, -0.5f,  0.5f,  0.0f, 0.0f,
	-0.5f, -0.5f, -0.5f,  0.0f, 1.0f,

	-0.5f,  0.5f, -0.5f,  0.0f, 1.0f,
	 0.5f,  0.5f, -0.5f,  1.0f, 1.0f,
	 0.5f,  0.5f,  0.5f,  1.0f, 0.0f,
	 0.5f,  0.5f,  0.5f,  1.0f, 0.0f,
	-0.5f,  0.5f,  0.5f,  0.0f, 0.0f,
	-0.5f,  0.5f, -0.5f,  0.0f, 1.0f
	};

	float vertices2[120] = {
		-0.5f, 0.0f, 0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f, 0.5f,  1.0f, 0.0f,
		 0.0f, 0.5f, 0.0f,  0.25f, 1.0f,

	    -0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f, -0.5f,  1.0f, 0.0f,
		 0.0f, 0.5f, 0.0f,  0.25f, 1.0f,

		-0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		-0.5f, 0.0f,  0.5f,  1.0f, 0.0f,
		 0.0f, 0.5f, 0.0f,  0.25f, 1.0f,

		 0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f,  0.5f,  1.0f, 0.0f,
		 0.0f, 0.5f, 0.0f,  0.25f, 1.0f,

		 -0.5f, 0.0f, 0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f, 0.5f,  1.0f, 0.0f,
		 0.0f, -0.5f, 0.0f,  0.25f, 1.0f,

		-0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f, -0.5f,  1.0f, 0.0f,
		 0.0f, -0.5f, 0.0f,  0.25f, 1.0f,

		-0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		-0.5f, 0.0f,  0.5f,  1.0f, 0.0f,
		 0.0f, -0.5f, 0.0f,  0.25f, 1.0f,

		 0.5f, 0.0f, -0.5f,  0.0f, 0.0f,
		 0.5f, 0.0f,  0.5f,  1.0f, 0.0f,
		 0.0f, -0.5f, 0.0f,  0.25f, 1.0f,
	};

	GLuint VAO, VBO;
	std::vector< Block *> snake_blocks; 
	int length;
public:
	Snake();
	Snake(glm::ivec3 coordinates);
	~Snake();
	std::vector<Block*> getCoords(void);
	int	getLength(void);
	void setInitialCoords(glm::ivec3 coordinates);
	bool Move(directions dir, const Board* board, Food* food); 
	bool canEat(glm::vec3 head_coords, glm::vec3 food_coords);
	bool doesCollide(std::vector<Block*> snake, const Board* board);
	void Draw(glm::mat4 model_matrix, glm::mat4 view_matrix, glm::mat4 projection_matrix, Shader* shaderProgram);
};

#endif SNAKE_H